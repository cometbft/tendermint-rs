{
  "batch_name": "Single Step Skipping-commit",
  "test_cases": [
    {
      "description": "Case: Trusted height=1, verifying signed header at height=3 where 1/3 vals dont sign, should expect error",
      "initial": {
        "signed_header": {
          "header": {
            "version": {
              "block": "0",
              "app": "0"
            },
            "chain_id": "test-chain-01",
            "height": "1",
            "time": "2019-11-02T15:04:00Z",
            "last_block_id": {
              "hash": "",
              "parts": {
                "total": "0",
                "hash": ""
              }
            },
            "last_commit_hash": "",
            "data_hash": "",
            "validators_hash": "C403871B77A3295FFF1EE321424FC969EFAD87EF16740DF28A1B6CA62CA0977C",
            "next_validators_hash": "C403871B77A3295FFF1EE321424FC969EFAD87EF16740DF28A1B6CA62CA0977C",
            "consensus_hash": "048091BC7DDC283F77BFBF91D73C44DA58C3DF8A9CBC867405D8B7F3DAADA22F",
            "app_hash": "6170705F68617368",
            "last_results_hash": "",
            "evidence_hash": "",
            "proposer_address": "01F527D77D3FFCC4FCFF2DDC2952EEA5414F2A33"
          },
          "commit": {
            "height": "1",
            "round": "1",
            "block_id": {
              "hash": "A245849C14EF8556CBF925997900CDD4B5519981FD96A2DBE822E5F048031ABD",
              "parts": {
                "total": "1",
                "hash": "D1F30CEBE0D8767074E22104CC7F548E41003C096B776C6152A5CAF48F72E63A"
              }
            },
            "signatures": [
              {
                "block_id_flag": 2,
                "validator_address": "01F527D77D3FFCC4FCFF2DDC2952EEA5414F2A33",
                "timestamp": "2019-11-02T15:04:10Z",
                "signature": "uGmIBqgS9cd3L8tdDNoECnp7dWB/9E5LVd67WCv2zjcihyRkQC9N7qv6HRYK4uVIx4A2TydKiPGR2iayGyADCg=="
              },
              {
                "block_id_flag": 2,
                "validator_address": "026CC7B6F3E62F789DBECEC59766888B5464737D",
                "timestamp": "2019-11-02T15:04:10Z",
                "signature": "gq9gLG1jOoYdTVGuvfRy0DFPEjARYDmQwWFDK3gIRSb/+hFLs773ULIbyw93n6M/tQdmWEvDZ2OI9LJ5hamCCQ=="
              },
              {
                "block_id_flag": 2,
                "validator_address": "03A238BCAF7D1626DFE8A4AFB9448D00B7A3D2E2",
                "timestamp": "2019-11-02T15:04:10Z",
                "signature": "kF/JeXJ5hZajccjS0E36b7U9kcWu2dywnxeY74gO8Beu4+lbL/HIgXjv01RKIsJQoTl0LQF54ekf7ftU4fQXCQ=="
              }
            ]
          }
        },
        "next_validator_set": {
          "validators": [
            {
              "address": "01F527D77D3FFCC4FCFF2DDC2952EEA5414F2A33",
              "pub_key": {
                "type": "tendermint/PubKeyEd25519",
                "value": "OAaNq3DX/15fGJP2MI6bujt1GRpvjwrqIevChirJsbc="
              },
              "voting_power": "50",
              "proposer_priority": "-100"
            },
            {
              "address": "026CC7B6F3E62F789DBECEC59766888B5464737D",
              "pub_key": {
                "type": "tendermint/PubKeyEd25519",
                "value": "+vlsKpn6ojn+UoTZl+w+fxeqm6xvUfBokTcKfcG3au4="
              },
              "voting_power": "50",
              "proposer_priority": "50"
            },
            {
              "address": "03A238BCAF7D1626DFE8A4AFB9448D00B7A3D2E2",
              "pub_key": {
                "type": "tendermint/PubKeyEd25519",
                "value": "b6hwk3pjiOTJfLVCcLDA3I3lO71zWJ0VSded5LUl9T0="
              },
              "voting_power": "50",
              "proposer_priority": "50"
            }
          ],
          "proposer": {
            "address": "01F527D77D3FFCC4FCFF2DDC2952EEA5414F2A33",
            "pub_key": {
              "type": "tendermint/PubKeyEd25519",
              "value": "OAaNq3DX/15fGJP2MI6bujt1GRpvjwrqIevChirJsbc="
            },
            "voting_power": "50",
            "proposer_priority": "-100"
          }
        },
        "trusting_period": "10800000000000",
        "now": "2019-11-02T15:30:00Z"
      },
      "input": [
        {
          "signed_header": {
            "header": {
              "version": {
                "block": "0",
                "app": "0"
              },
              "chain_id": "test-chain-01",
              "height": "3",
              "time": "2019-11-02T15:04:10Z",
              "last_block_id": {
                "hash": "BF9535C5A5FEFB00719BAB70B177C0D4EA3E18E433E91E396EC61ADE2CE12161",
                "parts": {
                  "total": "1",
                  "hash": "1DC8F8E942E7FDFB42A83B3E308FCBD6CC7602F60FB7812DC91F91A6AFAE295A"
                }
              },
              "last_commit_hash": "CE50B907C13B48572BD2EFA1FED9A9341B7F680F3EC3F562ED0A8E745D6F528E",
              "data_hash": "",
              "validators_hash": "C403871B77A3295FFF1EE321424FC969EFAD87EF16740DF28A1B6CA62CA0977C",
              "next_validators_hash": "C403871B77A3295FFF1EE321424FC969EFAD87EF16740DF28A1B6CA62CA0977C",
              "consensus_hash": "048091BC7DDC283F77BFBF91D73C44DA58C3DF8A9CBC867405D8B7F3DAADA22F",
              "app_hash": "6170705F68617368",
              "last_results_hash": "",
              "evidence_hash": "",
              "proposer_address": "026CC7B6F3E62F789DBECEC59766888B5464737D"
            },
            "commit": {
              "height": "3",
              "round": "1",
              "block_id": {
                "hash": "E56DEC6C1AF5879B55DB7288CE698E7C67BAD20011371BF1EC53845079583524",
                "parts": {
                  "total": "1",
                  "hash": "E7198B911EF65EA64C7A1601504F116213E27AE32A5D2BD6B5BDBFB3F28A69DE"
                }
              },
              "signatures": [
                {
                  "block_id_flag": 1,
                  "validator_address": "01F527D77D3FFCC4FCFF2DDC2952EEA5414F2A33",
                  "timestamp": null,
                  "signature": null
                },
                {
                  "block_id_flag": 2,
                  "validator_address": "026CC7B6F3E62F789DBECEC59766888B5464737D",
                  "timestamp": "2019-11-02T15:04:20Z",
                  "signature": "w1RvpvDNe7aS2RBXrHBTJPbpQ9SdBVX38Bh+se+5zziL0+sihK6SZqrnHBulH7x4VUMDHgJg5dVwXwkjiOLHAA=="
                },
                {
                  "block_id_flag": 2,
                  "validator_address": "03A238BCAF7D1626DFE8A4AFB9448D00B7A3D2E2",
                  "timestamp": "2019-11-02T15:04:20Z",
                  "signature": "UaEzvVJ5ewddDy5mnuBfIzEDpcMUX2La8PMZhjjKTN/IVVRnrxgLZ4pbKg+tAD4eho5KYVkqAVn2u1m9XQuWAg=="
                }
              ]
            }
          },
          "validator_set": {
            "validators": [
              {
                "address": "01F527D77D3FFCC4FCFF2DDC2952EEA5414F2A33",
                "pub_key": {
                  "type": "tendermint/PubKeyEd25519",
                  "value": "OAaNq3DX/15fGJP2MI6bujt1GRpvjwrqIevChirJsbc="
                },
                "voting_power": "50",
                "proposer_priority": "-50"
              },
              {
                "address": "026CC7B6F3E62F789DBECEC59766888B5464737D",
                "pub_key": {
                  "type": "tendermint/PubKeyEd25519",
                  "value": "+vlsKpn6ojn+UoTZl+w+fxeqm6xvUfBokTcKfcG3au4="
                },
                "voting_power": "50",
                "proposer_priority": "-50"
              },
              {
                "address": "03A238BCAF7D1626DFE8A4AFB9448D00B7A3D2E2",
                "pub_key": {
                  "type": "tendermint/PubKeyEd25519",
                  "value": "b6hwk3pjiOTJfLVCcLDA3I3lO71zWJ0VSded5LUl9T0="
                },
                "voting_power": "50",
                "proposer_priority": "100"
              }
            ],
            "proposer": {
              "address": "026CC7B6F3E62F789DBECEC59766888B5464737D",
              "pub_key": {
                "type": "tendermint/PubKeyEd25519",
                "value": "+vlsKpn6ojn+UoTZl+w+fxeqm6xvUfBokTcKfcG3au4="
              },
              "voting_power": "50",
              "proposer_priority": "-50"
            }
          },
          "next_validator_set": {
            "validators": [
              {
                "address": "01F527D77D3FFCC4FCFF2DDC2952EEA5414F2A33",
                "pub_key": {
                  "type": "tendermint/PubKeyEd25519",
                  "value": "OAaNq3DX/15fGJP2MI6bujt1GRpvjwrqIevChirJsbc="
                },
                "voting_power": "50",
                "proposer_priority": "-100"
              },
              {
                "address": "026CC7B6F3E62F789DBECEC59766888B5464737D",
                "pub_key": {
                  "type": "tendermint/PubKeyEd25519",
                  "value": "+vlsKpn6ojn+UoTZl+w+fxeqm6xvUfBokTcKfcG3au4="
                },
                "voting_power": "50",
                "proposer_priority": "50"
              },
              {
                "address": "03A238BCAF7D1626DFE8A4AFB9448D00B7A3D2E2",
                "pub_key": {
                  "type": "tendermint/PubKeyEd25519",
                  "value": "b6hwk3pjiOTJfLVCcLDA3I3lO71zWJ0VSded5LUl9T0="
                },
                "voting_power": "50",
                "proposer_priority": "50"
              }
            ],
            "proposer": {
              "address": "01F527D77D3FFCC4FCFF2DDC2952EEA5414F2A33",
              "pub_key": {
                "type": "tendermint/PubKeyEd25519",
                "value": "OAaNq3DX/15fGJP2MI6bujt1GRpvjwrqIevChirJsbc="
              },
              "voting_power": "50",
              "proposer_priority": "-100"
            }
          }
        }
      ],
      "expected_output": "error"
    },
    {
      "description": "Case: Trusted height=1, verifying signed header at height=3 where more than two-thirds vals did sign, should not expect error",
      "initial": {
        "signed_header": {
          "header": {
            "version": {
              "block": "0",
              "app": "0"
            },
            "chain_id": "test-chain-01",
            "height": "1",
            "time": "2019-11-02T15:04:00Z",
            "last_block_id": {
              "hash": "",
              "parts": {
                "total": "0",
                "hash": ""
              }
            },
            "last_commit_hash": "",
            "data_hash": "",
            "validators_hash": "26952B5D784A1564D167DF98D2D37376B5E77771928256D25E6FF9AE3AD11564",
            "next_validators_hash": "26952B5D784A1564D167DF98D2D37376B5E77771928256D25E6FF9AE3AD11564",
            "consensus_hash": "048091BC7DDC283F77BFBF91D73C44DA58C3DF8A9CBC867405D8B7F3DAADA22F",
            "app_hash": "6170705F68617368",
            "last_results_hash": "",
            "evidence_hash": "",
            "proposer_address": "01F527D77D3FFCC4FCFF2DDC2952EEA5414F2A33"
          },
          "commit": {
            "height": "1",
            "round": "1",
            "block_id": {
              "hash": "15F15EF50BDE2018F4B129A827F90C18222C757770C8295EB8EE7BF50E761BC0",
              "parts": {
                "total": "1",
                "hash": "077E16D720F9AA656EBFD7F3FB31A4A35E1F2F4EBEBB123642BED45535D88AD5"
              }
            },
            "signatures": [
              {
                "block_id_flag": 2,
                "validator_address": "01F527D77D3FFCC4FCFF2DDC2952EEA5414F2A33",
                "timestamp": "2019-11-02T15:04:10Z",
                "signature": "GpfzfJN5RQpKqHiZsNu3dg5z5SuD4M2sg5UdMhJdhyIEoX6jZey1M2bYec3tHy44crtfCM6D4o6RIYvsfZRlBQ=="
              },
              {
                "block_id_flag": 2,
                "validator_address": "026CC7B6F3E62F789DBECEC59766888B5464737D",
                "timestamp": "2019-11-02T15:04:10Z",
                "signature": "ObsWDMxodz7SfkGHvX5iLbHKpVkvvso0kSl2X8cPmDjinzc8fDNcMiO5V8ba3EZM9ZALayiIMsd0Pw3Z2C+nBA=="
              },
              {
                "block_id_flag": 2,
                "validator_address": "03A238BCAF7D1626DFE8A4AFB9448D00B7A3D2E2",
                "timestamp": "2019-11-02T15:04:10Z",
                "signature": "mxvQzgchsY/GnZ7qF/I7YavLGi4aVo7hR0xqoCTB1q3PMJ/tRbTgvzdxlPtcK0POB7dQwmc20f9EGLKs1bAiAw=="
              },
              {
                "block_id_flag": 2,
                "validator_address": "03EC0413849A3311A5341E7A69D6C544E9A30310",
                "timestamp": "2019-11-02T15:04:10Z",
                "signature": "xiOf4pjfMACBpVmPGK+OoC0WPB3zqrv9GSizPF8S//W3n6D1P21AlCfmqOLp4Uzl/dwGxW4MQ1s+LqQxBzs5Bg=="
              }
            ]
          }
        },
        "next_validator_set": {
          "validators": [
            {
              "address": "01F527D77D3FFCC4FCFF2DDC2952EEA5414F2A33",
              "pub_key": {
                "type": "tendermint/PubKeyEd25519",
                "value": "OAaNq3DX/15fGJP2MI6bujt1GRpvjwrqIevChirJsbc="
              },
              "voting_power": "50",
              "proposer_priority": "-150"
            },
            {
              "address": "026CC7B6F3E62F789DBECEC59766888B5464737D",
              "pub_key": {
                "type": "tendermint/PubKeyEd25519",
                "value": "+vlsKpn6ojn+UoTZl+w+fxeqm6xvUfBokTcKfcG3au4="
              },
              "voting_power": "50",
              "proposer_priority": "50"
            },
            {
              "address": "03A238BCAF7D1626DFE8A4AFB9448D00B7A3D2E2",
              "pub_key": {
                "type": "tendermint/PubKeyEd25519",
                "value": "b6hwk3pjiOTJfLVCcLDA3I3lO71zWJ0VSded5LUl9T0="
              },
              "voting_power": "50",
              "proposer_priority": "50"
            },
            {
              "address": "03EC0413849A3311A5341E7A69D6C544E9A30310",
              "pub_key": {
                "type": "tendermint/PubKeyEd25519",
                "value": "BQpQJElLqI4Ajo+vLroQ7KaNv+khVW2oexo0vDbPGFw="
              },
              "voting_power": "50",
              "proposer_priority": "50"
            }
          ],
          "proposer": {
            "address": "01F527D77D3FFCC4FCFF2DDC2952EEA5414F2A33",
            "pub_key": {
              "type": "tendermint/PubKeyEd25519",
              "value": "OAaNq3DX/15fGJP2MI6bujt1GRpvjwrqIevChirJsbc="
            },
            "voting_power": "50",
            "proposer_priority": "-150"
          }
        },
        "trusting_period": "10800000000000",
        "now": "2019-11-02T15:30:00Z"
      },
      "input": [
        {
          "signed_header": {
            "header": {
              "version": {
                "block": "0",
                "app": "0"
              },
              "chain_id": "test-chain-01",
              "height": "3",
              "time": "2019-11-02T15:04:10Z",
              "last_block_id": {
                "hash": "5E87BD3A35C62D06138273453AF49C7728E4F8FB4CAFB0784F4816D5052AA349",
                "parts": {
                  "total": "1",
                  "hash": "DC797E9C450AE5FD0D8000E31672BE3EE97B6C0A3BD69239187F75C00C39D72B"
                }
              },
              "last_commit_hash": "D5439DD65D45EF1E51412691BCF2F6741D48AC1325572E08D48BD72F80669E70",
              "data_hash": "",
              "validators_hash": "26952B5D784A1564D167DF98D2D37376B5E77771928256D25E6FF9AE3AD11564",
              "next_validators_hash": "26952B5D784A1564D167DF98D2D37376B5E77771928256D25E6FF9AE3AD11564",
              "consensus_hash": "048091BC7DDC283F77BFBF91D73C44DA58C3DF8A9CBC867405D8B7F3DAADA22F",
              "app_hash": "6170705F68617368",
              "last_results_hash": "",
              "evidence_hash": "",
              "proposer_address": "026CC7B6F3E62F789DBECEC59766888B5464737D"
            },
            "commit": {
              "height": "3",
              "round": "1",
              "block_id": {
                "hash": "673A5926573823D76B84C01877887D9AA305E1FAFE50EC167F433E7B3A0FAABB",
                "parts": {
                  "total": "1",
                  "hash": "08B22B6102C1AA5A35FE903C7ED2631A0DFC38D09F4592A39F9C1B5D82F61F85"
                }
              },
              "signatures": [
                {
                  "block_id_flag": 1,
                  "validator_address": "01F527D77D3FFCC4FCFF2DDC2952EEA5414F2A33",
                  "timestamp": null,
                  "signature": null
                },
                {
                  "block_id_flag": 2,
                  "validator_address": "026CC7B6F3E62F789DBECEC59766888B5464737D",
                  "timestamp": "2019-11-02T15:04:20Z",
                  "signature": "IRwtPBFCkc8Yu+lbWiQxdyi3R7xIdbq/gDpR0Kvu8tVji5R4RkpxxQMfG4kifR2P+B/WbPLrsmep942qXFZeCg=="
                },
                {
                  "block_id_flag": 2,
                  "validator_address": "03A238BCAF7D1626DFE8A4AFB9448D00B7A3D2E2",
                  "timestamp": "2019-11-02T15:04:20Z",
                  "signature": "SlPhkzu1YtvKr2SXG3gLZwNfoe/Y/xWAgnQGHSDPzjUzlNC79mUqBRrUvKqojXGpSeGgrNUvW/4uCaVCvUBECg=="
                },
                {
                  "block_id_flag": 2,
                  "validator_address": "03EC0413849A3311A5341E7A69D6C544E9A30310",
                  "timestamp": "2019-11-02T15:04:20Z",
                  "signature": "IUSW0/ZRdXN4pemlovBHqsGCGRQi/cbPupjqZeEB+e051fAee4QaQrGERxSZwqQ7edrFlRY6Z2L/2Z0/w2MLDA=="
                }
              ]
            }
          },
          "validator_set": {
            "validators": [
              {
                "address": "01F527D77D3FFCC4FCFF2DDC2952EEA5414F2A33",
                "pub_key": {
                  "type": "tendermint/PubKeyEd25519",
                  "value": "OAaNq3DX/15fGJP2MI6bujt1GRpvjwrqIevChirJsbc="
                },
                "voting_power": "50",
                "proposer_priority": "-100"
              },
              {
                "address": "026CC7B6F3E62F789DBECEC59766888B5464737D",
                "pub_key": {
                  "type": "tendermint/PubKeyEd25519",
                  "value": "+vlsKpn6ojn+UoTZl+w+fxeqm6xvUfBokTcKfcG3au4="
                },
                "voting_power": "50",
                "proposer_priority": "-100"
              },
              {
                "address": "03A238BCAF7D1626DFE8A4AFB9448D00B7A3D2E2",
                "pub_key": {
                  "type": "tendermint/PubKeyEd25519",
                  "value": "b6hwk3pjiOTJfLVCcLDA3I3lO71zWJ0VSded5LUl9T0="
                },
                "voting_power": "50",
                "proposer_priority": "100"
              },
              {
                "address": "03EC0413849A3311A5341E7A69D6C544E9A30310",
                "pub_key": {
                  "type": "tendermint/PubKeyEd25519",
                  "value": "BQpQJElLqI4Ajo+vLroQ7KaNv+khVW2oexo0vDbPGFw="
                },
                "voting_power": "50",
                "proposer_priority": "100"
              }
            ],
            "proposer": {
              "address": "026CC7B6F3E62F789DBECEC59766888B5464737D",
              "pub_key": {
                "type": "tendermint/PubKeyEd25519",
                "value": "+vlsKpn6ojn+UoTZl+w+fxeqm6xvUfBokTcKfcG3au4="
              },
              "voting_power": "50",
              "proposer_priority": "-100"
            }
          },
          "next_validator_set": {
            "validators": [
              {
                "address": "01F527D77D3FFCC4FCFF2DDC2952EEA5414F2A33",
                "pub_key": {
                  "type": "tendermint/PubKeyEd25519",
                  "value": "OAaNq3DX/15fGJP2MI6bujt1GRpvjwrqIevChirJsbc="
                },
                "voting_power": "50",
                "proposer_priority": "-150"
              },
              {
                "address": "026CC7B6F3E62F789DBECEC59766888B5464737D",
                "pub_key": {
                  "type": "tendermint/PubKeyEd25519",
                  "value": "+vlsKpn6ojn+UoTZl+w+fxeqm6xvUfBokTcKfcG3au4="
                },
                "voting_power": "50",
                "proposer_priority": "50"
              },
              {
                "address": "03A238BCAF7D1626DFE8A4AFB9448D00B7A3D2E2",
                "pub_key": {
                  "type": "tendermint/PubKeyEd25519",
                  "value": "b6hwk3pjiOTJfLVCcLDA3I3lO71zWJ0VSded5LUl9T0="
                },
                "voting_power": "50",
                "proposer_priority": "50"
              },
              {
                "address": "03EC0413849A3311A5341E7A69D6C544E9A30310",
                "pub_key": {
                  "type": "tendermint/PubKeyEd25519",
                  "value": "BQpQJElLqI4Ajo+vLroQ7KaNv+khVW2oexo0vDbPGFw="
                },
                "voting_power": "50",
                "proposer_priority": "50"
              }
            ],
            "proposer": {
              "address": "01F527D77D3FFCC4FCFF2DDC2952EEA5414F2A33",
              "pub_key": {
                "type": "tendermint/PubKeyEd25519",
                "value": "OAaNq3DX/15fGJP2MI6bujt1GRpvjwrqIevChirJsbc="
              },
              "voting_power": "50",
              "proposer_priority": "-150"
            }
          }
        }
      ],
      "expected_output": "no error"
    }
  ]
}